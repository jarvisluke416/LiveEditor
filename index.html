<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dynamic Full-Width Live Editors</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" />

  <style>
    body {
      margin: 0;
      font-family: 'Poppins', sans-serif;
      background: #222;
      color: #fff;
    }

    .editor-container {
     width: 100%;
     max-width: 100%;
     margin: 0;
     padding: 0 20px; 
    }

    .accordion {
      background: #333;
      margin-bottom: 10px;
      border-radius: 5px;
      overflow: hidden;
    }

    .accordion-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 15px;
      cursor: pointer;
      font-weight: bold;
      font-size: 16px;
    }

    .accordion-header:hover {
      background: #444;
    }

    .editor-body {
      display: flex;
      flex-direction: row;
      gap: 10px;
      padding: 10px;
      background: white;
      flex-wrap: wrap;
    }

    .editor {
      flex: 1;
      min-width: 250px;
      display: flex;
      flex-direction: column;
    }

    #output {
        height: 600px;
    }

    .editor label {
      padding: 5px;
      font-size: 14px;
      background: #000;
    }

    textarea {
      width: 100%;
      height: 150px;
      background: #222;
      color: #fff;
      border: none;
      padding: 10px;
      resize: vertical;
      font-size: 14px;
      outline: none;
    }

    iframe {
    width: 100%;
    height: 80vh; /* 80% of the viewport height */
    border: none;
    margin-top: 10px;
    border-radius: 5px;
    }
    
    .accordion-footer {
      text-align: center;
      margin: 15px 0;
    }

    .accordion-footer button {
      background: #008CBA;
      border: none;
      color: #fff;
      padding: 10px 20px;
      font-size: 16px;
      border-radius: 5px;
      cursor: pointer;
    }

    .accordion-footer button:hover {
      background: #0077a8;
    }
    
    @media (max-width: 768px) {
      .editor-body {
        flex-direction: column;
      }
      textarea {
        height: 120px;
      }
      iframe {
        height: 60vh;
      }
    }
  </style>
</head>
<body>
  <div class="editor-container" id="editorContainer"></div>
  <div class="accordion-footer">
    <button onclick="addEditor()">+ Add Editor</button>
  </div>

  <script>
    let editorCount = 0;

    function addEditor() {
      const container = document.getElementById('editorContainer');
      const editorId = editorCount++;
      
      const accordion = document.createElement('div');
      accordion.className = 'accordion';

      const header = document.createElement('div');
      header.className = 'accordion-header';
      header.innerHTML = `Editor ${editorId + 1} <span><i class="fa fa-minus" id="toggle-icon-${editorId}"></i></span>`;
      header.onclick = () => toggleAccordion(editorId);
      accordion.appendChild(header);

      const body = document.createElement('div');
      body.className = 'editor-body';
      body.id = `editor-body-${editorId}`;

      body.innerHTML = `
        <div class="editor">
          <label><i class="fa-brands fa-html5"></i> HTML</label>
          <textarea id="html-${editorId}" placeholder="Write HTML here..."></textarea>
        </div>
        <div class="editor">
          <label><i class="fa-brands fa-css3-alt"></i> CSS</label>
          <textarea id="css-${editorId}" placeholder="Write CSS here..."></textarea>
        </div>
        <div class="editor">
          <label><i class="fa-brands fa-js"></i> JS</label>
          <textarea id="js-${editorId}" placeholder="Write JS here..."></textarea>
        </div>
        <iframe id="output-${editorId}"></iframe>
      `;

      accordion.appendChild(body);
      container.appendChild(accordion);

      ['html', 'css', 'js'].forEach(type => {
        document.getElementById(`${type}-${editorId}`).addEventListener('input', () => runEditor(editorId));
      });

      runEditor(editorId);
    }

    function runEditor(id) {
      const htmlCode = document.getElementById(`html-${id}`).value;
      const cssCode = document.getElementById(`css-${id}`).value;
      const jsCode = document.getElementById(`js-${id}`).value;
      const output = document.getElementById(`output-${id}`);
      const doc = output.contentDocument || output.contentWindow.document;

      doc.open();
      doc.write(`
        <style>${cssCode}</style>
        ${htmlCode}
        <script>${jsCode}<\/script>
      `);
      doc.close();
    }

    function toggleAccordion(id) {
      const body = document.getElementById(`editor-body-${id}`);
      const icon = document.getElementById(`toggle-icon-${id}`);
      if (body.style.display === 'none' || body.style.display === '') {
        body.style.display = 'flex';
        icon.className = 'fa fa-minus';
      } else {
        body.style.display = 'none';
        icon.className = 'fa fa-plus';
      }
    }

    addEditor();
  </script>
</body>
</html>
